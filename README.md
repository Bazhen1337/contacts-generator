# Contacts-generator

Проект для генерации тестовых данных в Bitrix24 CRM через REST API.

## Технические требования
`PHP: 8.1`

## Описание

Скрипт автоматически создает в Bitrix24:
- 5 тестовых контактов с случайными данными (ФИО, телефон, email)
- 15 сделок, привязанных к случайным контактам
- Возвращает информацию о контактах в формате JSON

## Быстрый старт

### 1. Настройка Bitrix24

1. Создайте бесплатный облачный [Bitrix24](https://www.bitrix24.ru/)
2. В поиске введите "Разработчикам"
3. Перейдите в "Другое" → "Входящий вебхук"
4. Активируйте пробный период Маркетплейс
5. Настройка прав: выберите **CRM**
6. Скопируйте ваш вебхук из поля "Вебхук для вызова REST API"

### 2. Установка и запуск

```bash
# Клонирование репозитория
git clone https://github.com/Bazhen1337/contacts-generator.git
cd contacts-generator

# Настройка вебхука (редактируем файл)
nano settings.php
```
В файле settings.php укажите ваш вебхук:
```php
define('C_REST_WEB_HOOK_URL','https://your-domain.bitrix24.ru/rest/1/your-webhook/');
```

### 3. Запуск через Docker

```bash
# Запуск контейнера
docker-compose up -d
```

Приложение будет доступно по адресу: http://localhost:8000

### 4. Запуск без Docker

```bash
# Требуется PHP 8.1+
php -S localhost:8000
```

## Описание основных файлов

### 1. contactsGenerator.php
Класс для генерации контактов

```php
//interface

public array $contact_ids = [];

public function generate($count): void {

}
```

Переменная `$contact_ids` заполняется айди только что созданных контактов, в результаты работы функции `generate`

### 2. dealsGenerator.php
Класс для генерации сделок.

```php
//interface

function generate($count, $contact_ids): void {

}
```
Для работы требует айди контактов, которые будут привязаны к только что созданным сделкам

### 3. contactsList.php
Класс для получения списка контактов.

### 4. index.php
Точка входа в скрипт, по сути контроллер

### 5. settings.php
Конфигурационный файл, здесь можно установить свой вебхук и изменить количество генерируемых сущностей

### 6. pool.php
Пул для генерации, содержит массивы, из которых генерируются сущности. Здесь можно добавить свои имена, отчества, фамилии и так далее
